<ui:composition 
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets" 
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui" 
	xmlns:o="http://omnifaces.org/ui">
	<script src="http://maps.google.com/maps/api/js?sensor=false"
	type="text/javascript"></script>
	<div class="contentDiv" >
		<h:form>
			<h2>City</h2>
			<h3>Boundaries</h3>
			<p:accordionPanel id="boundariesPanel" multiple="false">
				<p:tab title="Free boundaries">
					<p:gmap center="12,55" type="HYBRID" zoom="8" />
					<h:outputLabel for="cityNameInput" value="Area name"/>
					<h:inputText id="cityNameInput"/>
				</p:tab>
				<p:tab title="OSM file">
					Seleted files:
					<h:selectOneListbox value="#{cityCtrl.mapAndBusstopFileData.osmFileNames}" />
					Available files:
					<h:selectOneListbox value="#{cityCtrl.retrieveOsmFileCacheKeys}"/>
					Selection preview: <p:gmap center="1,2" type="HYBRID" zoom="8"/>
					Upload other:
					<p:fileUpload fileUploadListener="#{cityCtrl.onOSMFileUpload}"/>
					Selected matching GTFS files:
					<h:selectOneListbox value="#{cityCtrl.mapAndBusstopFileData.busStopFileNames}"/>
					Available GTFS files:
					<h:selectOneListbox value="#{cityCtrl.retrieveBusStopFileCacheKeys}"/>
					Selection preview: <p:gmap center="1,2" type="HYBRID" zoom="8"/>
					Upload other:
					<p:fileUpload fileUploadListener="#{cityCtrl.onGTFSFileUpload}" />
					<h:selectBooleanCheckbox onchange="" label="Use file boundaries" value="#{cityCtrl.useFileBoundaries}"/>
					<p:panel collapsed="true">
						Select boundaries:
						<p:gmap center="1,2" type="HYBRID" zoom="8" />
					</p:panel>
				</p:tab>
				<p:tab title="OSM PostGIS data based" >
					host: <h:inputText />
					port: <p:spinner/>
					user: <h:inputText/>
					password: <h:inputText/>
					Search:
					<p:autoComplete id="someid" value="#{cityCtrl.chosenCity}"   
													completeMethod="#{cityCtrl.cityNameAutocomplete}" var="c" itemLabel="#{c.name}" itemValue="#{c}" converter="cityConverter">
						<p:ajax event="itemSelect" listener="#{cityCtrl.onCityNameSelectionChange}"
										update="cityNameMap"/>
					</p:autoComplete>
					<p:gmap id="cityNameMap" center="#{cityCtrl.mapCenter}" zoom="13" type="HYBRID"  model="#{cityCtrl.mapModel}" style="width:600px;height:400px" fitBounds="false"/>
				</p:tab>
			</p:accordionPanel>
			<h3>Public transport data</h3>
			Path to gtfs data file: <p:fileUpload fileUploadListener="#{cityCtrl.onGTFSFileUpload}"/> @TODO: preview on separate map
			<h3>Parameters</h3>
			<div>
				Choose the individual parameters of the City, for example the name, the altitude or if the city is close to a river or near to a coast.
			</div>
			Population:	<p:spinner value="#{cityCtrl.chosenPopulation}" min="1"/>
			Altitude [m]:
			<p:spinner value="#{cityCtrl.chosenAltitude}" stepFactor="1" title="Altitude of the city" min="-10" max="8000" >
				<f:ajax />
			</p:spinner>
			Near river:
			<h:selectBooleanCheckbox value="#{cityCtrl.nearRiver}" title="determine wheter the simulated city is (not) located near a river"/>
			Near coast:
			<h:selectBooleanCheckbox value="#{cityCtrl.nearSea}" title="determine wheter the simulated city is (not) located near a river"/>
		</h:form>
	</div>
</ui:composition>